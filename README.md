![alt text](https://embeddedams.nl/wp-content/uploads/2018/07/EmbeddedAMS_long.png "Embedded AMS Logo")

Embedded Proto is a product of Embedded AMS B.V. Amsterdam, [www.EmbeddedAMS.nl](https://www.EmbeddedAMS.nl), [info@EmbeddedAMS.nl](mailto:info@EmbeddedAMS.nl)



# Introduction 

This is a simple demo of a makefile toolchain for a STM 32bit ARM microcontroller. The goal of this demo is to demonstrate a possible method to generate Embedded Proto sourcecode and use it in a project. 

# Folder layout

After generating and building the code this folder (stm32f4xx) the folling sub folders will be present:
* build \- The binary output of the makefiles
* proto \- The location where the .proto files are located
* src \- The sourcecode folder
  ** external \- Sourcecode of the STM HAL and ARM CMSIS
  ** generated \- This folder is created during the source code generation step. It includes the code generated by the Embedded Proto plugin for the .proto files.


# Build steps

The build is devided into two steps:
1. Generating the sourcecode for the .proto files.
2. Build the sourcecode

These steps are executed using the script `run_build.sh`

The makefile assumes that the code has been generated. It includes the generated sourcecode folder (src/generated) just like any other.


# Sourcecode

The *main.cpp* holds a very simple infinte loop which over and over sets a new value in the protobuf message.
